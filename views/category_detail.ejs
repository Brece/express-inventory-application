<%- include('partials/_header') %> 

<!-- TODO: rework layout; category details with edit and delete buttons; display lists of items that belong to this category -->
<div class="o-wrap c-category-detail">
    <h1><%= title %></h1>
    <div class="c-category-detail__container">
        <h2><%= category.name %></h2>
        <p><%= category.description %></p>
    </div>

    <% if (category.protected) { -%>
        <p>This Document is protected and cannot be changed or deleted.</p>
    <% } else { -%>
        <div class="c-category__btns">
            <form action="/category/<%= category._id %>/update" method="GET">
                <button class="c-btn" type="submit">Update</button>
            </form>
            <form action="/category/<%= category._id %>/delete" method="GET">
                <button class="c-btn" type="submit">Delete</button>
            </form>
        </div>
    <% } -%>

    <% if (category_items.length > 0) { %>
        <div class="c-category-detail__items">
            <% for (const item of category_items) { %>
                <%- include('partials/_item_card', { item }) %>
            <% } %>
        </div>
    <% } %>
</div>

<%- include('partials/_footer') %> 